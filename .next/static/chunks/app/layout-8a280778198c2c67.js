(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{419:(e,t,a)=>{"use strict";a.d(t,{J:()=>s,v:()=>i});var o=a(5155),r=a(2115);let n=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)(!1),[s,l]=(0,r.useState)(0),[c,d]=(0,r.useState)([]),[u,m]=(0,r.useState)({id:"0",endTime:Date.now()+6048e5,resolved:!1,outcome:0,hasClaimed:!1});return(0,r.useEffect)(()=>{let e=localStorage.getItem("wendao_coins"),t=localStorage.getItem("wendao_bets"),a=localStorage.getItem("wendao_is_guest"),o=localStorage.getItem("wendao_mock_market");e&&l(parseInt(e)),t&&d(JSON.parse(t)),"true"===a&&i(!0),o&&m(JSON.parse(o))},[]),(0,r.useEffect)(()=>{localStorage.setItem("wendao_coins",s.toString()),localStorage.setItem("wendao_bets",JSON.stringify(c)),localStorage.setItem("wendao_is_guest",a.toString()),localStorage.setItem("wendao_mock_market",JSON.stringify(u))},[s,c,a,u]),(0,o.jsx)(n.Provider,{value:{isGuest:a,daoCoins:s,guestBets:c,mockMarket:u,shareToEarn:()=>{let e=new Date().toDateString(),t=localStorage.getItem("wendao_share_data"),a=0;if(t){let o=JSON.parse(t);o.date===e&&(a=o.count)}if(a>=5)return void alert("❌ 今日分享已达上限 (".concat(5,"次)\n明天再来吧！"));let o=window.location.href||"https://wendao.xyz";navigator.clipboard.writeText("\uD83D\uDD2E 问DAO - 预测市场\n\n我在问DAO下注了！来一起玩吧：\n".concat(o)),localStorage.setItem("wendao_share_data",JSON.stringify({date:e,count:a+1})),l(e=>e+1);let r=5-a-1;alert("\uD83C\uDF89 分享成功！获得 ".concat(1," 道币\n\uD83D\uDCCB 链接已复制\n今日剩余 ").concat(r," 次分享机会"))},placeGuestBet:(e,t,a)=>a>s?(alert("道币不足！"),!1):a<=0?(alert("请输入有效金额"),!1):(l(e=>e-a),d(o=>[...o,{marketId:e,direction:t,amount:a,timestamp:Date.now()}]),!0),adminResolveMarket:e=>{m(t=>({...t,resolved:!0,outcome:e}))},claimMockWinnings:()=>{let e=c.find(e=>"0"===e.marketId);if(e&&!u.hasClaimed&&(1===u.outcome&&"YES"===e.direction||2===u.outcome&&"NO"===e.direction)){let t=c.filter(e=>"0"===e.marketId&&"YES"===e.direction).reduce((e,t)=>e+t.amount,1e3),a=c.filter(e=>"0"===e.marketId&&"NO"===e.direction).reduce((e,t)=>e+t.amount,1e3),o=1===u.outcome?t:a,r=Math.floor(e.amount/o*(t+a));l(e=>e+r),m(e=>({...e,hasClaimed:!0})),alert("\uD83C\uDF89 恭喜！获得 ".concat(r," 道币！"))}},resetMockMarket:()=>{m({id:"0",endTime:Date.now()+6048e5,resolved:!1,outcome:0,hasClaimed:!1}),d([]),alert("市场已重置")},loginAsGuest:()=>{i(!0),l(100),alert("\uD83C\uDF89 欢迎！您获得了 100 道币作为新人奖励！")},logoutGuest:()=>{i(!1),l(0),d([])}},children:t})}function s(){let e=(0,r.useContext)(n);if(!e)throw Error("useUser must be used within UserProvider");return e}},1290:()=>{},2e3:(e,t,a)=>{"use strict";a.d(t,{Providers:()=>l});var o=a(5155);a(2115);var r=a(7067),n=a(9776),i=a(419);let s=new r.E;function l(e){let{children:t}=e;return(0,o.jsx)(n.Ht,{client:s,children:(0,o.jsx)(i.v,{children:t})})}},9323:(e,t,a)=>{Promise.resolve().then(a.bind(a,2e3)),Promise.resolve().then(a.t.bind(a,5003,23)),Promise.resolve().then(a.t.bind(a,1290,23))}},e=>{e.O(0,[895,872,441,255,358],()=>e(e.s=9323)),_N_E=e.O()}]);